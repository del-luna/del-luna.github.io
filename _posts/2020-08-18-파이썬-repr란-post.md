---
layout: post
title: 파이썬 repr란?
author: Jaeheon Kwon
categories: Python
tags: [magic method]
---

오늘은 \__repr__와 \_\_str\_\_에 대해 알아보겠습니다.

우선 아래와 같은 클래스를 정의합니다.

```python
from math import hypot

class Vector:
    def __init__(self, x=0,y=0):
        self.x = x
        self.y = y
    
    #def __repr__(self):
    #    return f'Vector({self.x},{self.y})'
    
    def __abs__(self):
        return hypot(self.x,self.y)
    
    def __bool__(self):
        return bool(abs(self))
    
    def __add__(self, other):
        x = self.x + other.x
        y = self.y + other.y
        return Vector(x,y)
    
    def __mul__(self, scalar):
        return Vector(self.x*scalar, self.y*scalar)
```



더하기, 스칼라 배 가 가능한 벡터 클래스 입니다.

객체의 인스턴스를 정의하고 더한 결과값을 확인해봅시다.

```python
>>>v1 = Vector(3,5)
>>>v2 = Vector(4,2)

>>>print(v1+v2)

<__main__.Vector object at 0x7fe96d2e5438>
```

저희가 원하는 결과값은 Vector(7,7)인데 차이가 좀 있죠? 이를 사람이 보기 좋은 형태로 표현하기 위해선 어떻게 해야 할까요?

위에서 주석 처리된 \__repr__ 메소드를 사용하면 됩니다.

우선 repr를 사용했을 때의 결과는 아래와 같습니다.

```python
>>>print(v1+v2)

Vector(7,7)
```



```python
>>>print(type(repr(1)))
>>>print(type(repr([1,2,3])))
>>>print(type(repr(hypot)))

<class 'str'>
<class 'str'>
<class 'str'>
```



그런데 재밌는 사실은 위과 같은 방법은 str()함수를 사용해도 똑같은 결과가 나옵니다.

```python
>>>print(type(str(1)))
>>>print(type(str([1,2,3])))
>>>print(type(str(hypot)))

<class 'str'>
<class 'str'>
<class 'str'>
```



그렇다면 객체를 문자열 형태로 바꿔주는 이 둘의 차이점은 무엇일까요?

우선 \__str__()메소드는 str()생성자에 의해 호출되며 print함수에 의해 암묵적으로 사용된다고 합니다.

또한, str이 정의되지 않을 경우 파이썬 인터프리터는 repr를 호출한다고 합니다.

str이 print에 대해 암묵적으로 사용된다는 것을 확인해봅시다.

```python
class A:
    def __str__(self):
        return 'str method is called'

    def __repr__(self):
        return 'repr method is called'
>>>a=A()
>>>print(a)

str method is called
```

보시는 것 처럼 str이 사용되는 것을 볼 수 있습니다. 그렇다면 str이 없는 경우 print는 어떻게 될까요?



```python
class A:
    #def __str__(self):
    #    return 'str method is called'

    def __repr__(self):
        return 'repr method is called'
>>>a=A()
>>>print(a)

repr method is called
```

repr 메소드를 출력하는 것을 볼 수 있습니다.



str의 다른 기능에 대해 알아봅시다.

print함수는 여러가지 객체를 동시에 보여줄 수 있습니다. 다음과 같이 말이죠.

```python
>>>a=1
>>>b=[1,2,3]
>>>c='Hello World'
>>>print(a,b,c)

1 [1, 2, 3] Hello World
```



이게 가능한 이유는 a, b, c에 해당하는 int, str, list 자료형이 각 객체를 ‘문자열’로 반환하는 \__str__ 메소드를 내부적으로 구현하고 있고, 문자열은 Universal Interface이기 때문에 출처가 서로 완전히 다른 자료형임에도 문자열화된 인자들을 매끄럽게 이을 수 있었기 때문이라고 합니다.

다음과 같은 예시를 봅시다.

```python
>>>print(str(c))
>>>print(repr(c))

Hello World
'Hello World'
```

차이점이 보이시나요? repr는 문자열 형태로 리턴하고, str은 기존에 우리가 보던 형태로 print해주는 것을 볼 수 있습니다.



## Conclusion

str 메소드는 객체들의 데이터 타입을 변경하거나 혹은 매끄러운 연결을 위해서 사용하고, repr는 위의 Vector클래스 예시처럼 사람에게 보기 좋도록 표현할 때 사용한다고 기억하면 될 것 같습니다.



## Reference

[repr과 str의 차이점](https://shoark7.github.io/programming/python/difference-between-__repr__-vs-__str__)

